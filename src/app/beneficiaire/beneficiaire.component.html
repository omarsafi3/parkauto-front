<div class="container">
  <h2 class="mb-4">Beneficiaires</h2>
  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Nom</th>
        <th scope="col">Prénom</th>
        <th scope="col">Date Debut</th>
        <th scope="col">Date Fin</th>
        <th scope="col">Num Carte</th>
        <th scope="col">Code</th>
        <th scope="col">Port</th>
        <th scope="col">Actions</th>

      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let beneficiaire of beneficiaires">
        <td>{{ beneficiaire.idb }}</td>
        <td>{{ beneficiaire.nom }}</td>
        <td>{{ beneficiaire.prenom }}</td>
        <td>{{ beneficiaire.date_deb }}</td>
        <td>{{ beneficiaire.date_fin }}</td>
        <td>{{ beneficiaire.num_carte }}</td>
        <td>{{ beneficiaire.code }}</td>
        <td> {{ getPortName(beneficiaire.port_id).lib }}</td>
        <td>
          <button class="btn btn-sm btn-primary" (click)="edit(beneficiaire)">Modifier</button>
          <button class="btn btn-sm btn-danger" (click)="delete(beneficiaire.idb)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>

  <button class="btn btn-primary" (click)="add()">Ajouter</button>

  <div *ngIf="isEditing" class="edit-form">
    <h3>{{ currentBeneficiaire.idb ? 'Edit Beneficiaire' : 'Add Beneficiaire' }}</h3>
    <form (ngSubmit)="save()">
      <div class="form-group">
        <label for="nom">Nom</label>
        <input type="text" id="nom" class="form-control" [(ngModel)]="currentBeneficiaire.nom" name="nom" required>
      </div>
      <div class="form-group">
        <label for="prenom">Prénom</label>
        <input type="text" id="prenom" class="form-control" [(ngModel)]="currentBeneficiaire.prenom" name="prenom"
          required>
      </div>
      <div class="form-group">
        <label for="date_deb">Date Debut</label>
        <input type="date" id="date_deb" class="form-control" [(ngModel)]="currentBeneficiaire.date_deb" name="date_deb"
          required>
      </div>
      <div class="form-group">
        <label for="date_fin">Date Fin</label>
        <input type="date" id="date_fin" class="form-control" [(ngModel)]="currentBeneficiaire.date_fin" name="date_fin"
          required>
      </div>
      <div class="form-group">
        <label for="num_carte">Num Carte</label>
        <input type="text" id="num_carte" class="form-control" [(ngModel)]="currentBeneficiaire.num_carte"
          name="num_carte" required>
      </div>
      <div class="form-group">
        <label for="code">Port</label>
        <select class="form-select" aria-label="Select a port" name="port_id" [(ngModel)]="currentBeneficiaire.port_id">
          <option *ngFor="let port of ports" [value]="port.id">
            {{ port.lib }}
          </option>
        </select>
      </div>
      <button type="submit" class="btn btn-success">Save</button>
      <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
    </form>
  </div>
</div>